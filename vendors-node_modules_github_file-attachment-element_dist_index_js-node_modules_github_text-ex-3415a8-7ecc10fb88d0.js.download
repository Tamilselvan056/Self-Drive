"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_text-ex-3415a8"],{57260:(t,e,n)=>{n.d(e,{P:()=>Attachment});let Attachment=class Attachment{constructor(t,e){this.file=t,this.directory=e,this.state="pending",this.id=null,this.href=null,this.name=null,this.percent=0}static traverse(t,e){return i(t,e)}static from(t){let e=[];for(let n of t)if(n instanceof File)e.push(new Attachment(n));else if(n instanceof Attachment)e.push(n);else throw Error("Unexpected type");return e}get fullPath(){return this.directory?`${this.directory}/${this.file.name}`:this.file.name}isImage(){return["image/gif","image/png","image/jpg","image/jpeg","image/svg+xml"].indexOf(this.file.type)>-1}isVideo(){return["video/mp4","video/quicktime"].indexOf(this.file.type)>-1}saving(t){if("pending"!==this.state&&"saving"!==this.state)throw Error(`Unexpected transition from ${this.state} to saving`);this.state="saving",this.percent=t}saved(t){var e,n,i;if("pending"!==this.state&&"saving"!==this.state)throw Error(`Unexpected transition from ${this.state} to saved`);this.state="saved",this.id=null!==(e=null==t?void 0:t.id)&&void 0!==e?e:null,this.href=null!==(n=null==t?void 0:t.href)&&void 0!==n?n:null,this.name=null!==(i=null==t?void 0:t.name)&&void 0!==i?i:null}isPending(){return"pending"===this.state}isSaving(){return"saving"===this.state}isSaved(){return"saved"===this.state}};function i(t,e){return e&&h(t)?l("",d(t)):Promise.resolve(r(Array.from(t.files||[])).map(t=>new Attachment(t)))}function s(t){return t.name.startsWith(".")}function r(t){return Array.from(t).filter(t=>!s(t))}function a(t){return new Promise(function(e,n){t.file(e,n)})}function o(t){return new Promise(function(e,n){let i=[],s=t.createReader(),r=()=>{s.readEntries(t=>{t.length>0?(i.push(...t),r()):e(i)},n)};r()})}async function l(t,e){let n=[];for(let i of r(e))if(i.isDirectory)n.push(...await l(i.fullPath,await o(i)));else{let e=await a(i);n.push(new Attachment(e,t))}return n}function h(t){return t.items&&Array.from(t.items).some(t=>{let e=t.webkitGetAsEntry&&t.webkitGetAsEntry();return e&&e.isDirectory})}function d(t){return Array.from(t.items).map(t=>t.webkitGetAsEntry()).filter(t=>null!=t)}let FileAttachmentElement=class FileAttachmentElement extends HTMLElement{connectedCallback(){this.addEventListener("dragenter",m),this.addEventListener("dragover",m),this.addEventListener("dragleave",p),this.addEventListener("drop",f),this.addEventListener("paste",x),this.addEventListener("change",E)}disconnectedCallback(){this.removeEventListener("dragenter",m),this.removeEventListener("dragover",m),this.removeEventListener("dragleave",p),this.removeEventListener("drop",f),this.removeEventListener("paste",x),this.removeEventListener("change",E)}get directory(){return this.hasAttribute("directory")}set directory(t){t?this.setAttribute("directory",""):this.removeAttribute("directory")}async attach(t){let e=t instanceof DataTransfer?await Attachment.traverse(t,this.directory):Attachment.from(t),n=this.dispatchEvent(new CustomEvent("file-attachment-accept",{bubbles:!0,cancelable:!0,detail:{attachments:e}}));n&&e.length&&this.dispatchEvent(new CustomEvent("file-attachment-accepted",{bubbles:!0,detail:{attachments:e}}))}};function u(t){return Array.from(t.types).indexOf("Files")>=0}let c=null;function m(t){let e=t.currentTarget;c&&clearTimeout(c),c=window.setTimeout(()=>e.removeAttribute("hover"),200);let n=t.dataTransfer;n&&u(n)&&(n.dropEffect="copy",e.setAttribute("hover",""),t.preventDefault())}function p(t){t.dataTransfer&&(t.dataTransfer.dropEffect="none");let e=t.currentTarget;e.removeAttribute("hover"),t.stopPropagation(),t.preventDefault()}function f(t){let e=t.currentTarget;if(!(e instanceof FileAttachmentElement))return;e.removeAttribute("hover");let n=t.dataTransfer;n&&u(n)&&(e.attach(n),t.stopPropagation(),t.preventDefault())}let v=/^image\/(gif|png|jpeg)$/;function g(t){for(let e of t)if("file"===e.kind&&v.test(e.type))return e.getAsFile();return null}function x(t){if(!t.clipboardData||!t.clipboardData.items)return;let e=t.currentTarget;if(!(e instanceof FileAttachmentElement))return;let n=g(t.clipboardData.items);n&&(e.attach([n]),t.preventDefault())}function E(t){let e=t.currentTarget;if(!(e instanceof FileAttachmentElement))return;let n=t.target;if(!(n instanceof HTMLInputElement))return;let i=e.getAttribute("input");if(i&&n.id!==i)return;let s=n.files;s&&0!==s.length&&(e.attach(s),n.value="")}window.customElements.get("file-attachment")||(window.FileAttachmentElement=FileAttachmentElement,window.customElements.define("file-attachment",FileAttachmentElement));var b=null},57852:(t,e,n)=>{var i=n(10160);let s=/\s|\(|\[/;function r(t,e,n,{multiWord:i,lookBackIndex:r,lastMatchPosition:a}={multiWord:!1,lookBackIndex:0,lastMatchPosition:null}){let o=t.lastIndexOf(e,n-1);if(-1===o||o<r)return;if(i){if(null!=a){if(a===o)return;o=a-e.length}let i=t[o+1];if(" "===i&&n>=o+e.length+1)return;let s=t.lastIndexOf("\n",n-1);if(s>o)return;let r=t.lastIndexOf(".",n-1);if(r>o)return}else{let e=t.lastIndexOf(" ",n-1);if(e>o)return}let l=t[o-1];if(l&&!s.test(l))return;let h=t.substring(o+e.length,n);return{text:h,position:o+e.length}}let a=["position:absolute;","overflow:auto;","word-wrap:break-word;","top:0px;","left:-9999px;"],o=["box-sizing","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","line-height","max-height","min-height","padding-bottom","padding-left","padding-right","padding-top","border-bottom","border-left","border-right","border-top","text-decoration","text-indent","text-transform","width","word-spacing"],l=new WeakMap;function h(t,e){let n,i;let s=t.nodeName.toLowerCase();if("textarea"!==s&&"input"!==s)throw Error("expected textField to a textarea or input");let r=l.get(t);if(r&&r.parentElement===t.parentElement)r.innerHTML="";else{r=document.createElement("div"),l.set(t,r);let e=window.getComputedStyle(t),n=a.slice(0);"textarea"===s?n.push("white-space:pre-wrap;"):n.push("white-space:nowrap;");for(let t=0,i=o.length;t<i;t++){let i=o[t];n.push(`${i}:${e.getPropertyValue(i)};`)}r.style.cssText=n.join(" ")}let h=document.createElement("span");if(h.style.cssText="position: absolute;",h.innerHTML="&nbsp;","number"==typeof e){let s=t.value.substring(0,e);s&&(n=document.createTextNode(s)),(s=t.value.substring(e))&&(i=document.createTextNode(s))}else{let e=t.value;e&&(n=document.createTextNode(e))}if(n&&r.appendChild(n),r.appendChild(h),i&&r.appendChild(i),!r.parentElement){if(!t.parentElement)throw Error("textField must have a parentElement to mirror");t.parentElement.insertBefore(r,t)}return r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft,{mirror:r,marker:h}}function d(t,e=t.selectionEnd){let{mirror:n,marker:i}=h(t,e),s=n.getBoundingClientRect(),r=i.getBoundingClientRect();return setTimeout(()=>{n.remove()},5e3),{top:r.top-s.top,left:r.left-s.left}}let u=new WeakMap;let TextExpander=class TextExpander{constructor(t,e){this.expander=t,this.input=e,this.combobox=null,this.menu=null,this.match=null,this.justPasted=!1,this.lookBackIndex=0,this.oninput=this.onInput.bind(this),this.onpaste=this.onPaste.bind(this),this.onkeydown=this.onKeydown.bind(this),this.oncommit=this.onCommit.bind(this),this.onmousedown=this.onMousedown.bind(this),this.onblur=this.onBlur.bind(this),this.interactingWithList=!1,e.addEventListener("paste",this.onpaste),e.addEventListener("input",this.oninput),e.addEventListener("keydown",this.onkeydown),e.addEventListener("blur",this.onblur)}destroy(){this.input.removeEventListener("paste",this.onpaste),this.input.removeEventListener("input",this.oninput),this.input.removeEventListener("keydown",this.onkeydown),this.input.removeEventListener("blur",this.onblur)}dismissMenu(){this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex)}activate(t,e){var n,s;if(this.input!==document.activeElement&&this.input!==(null===(s=null===(n=document.activeElement)||void 0===n?void 0:n.shadowRoot)||void 0===s?void 0:s.activeElement))return;this.deactivate(),this.menu=e,e.id||(e.id=`text-expander-${Math.floor(1e5*Math.random()).toString()}`),this.expander.append(e),this.combobox=new i.Z(this.input,e);let{top:r,left:a}=d(this.input,t.position);e.style.top=`${r}px`,e.style.left=`${a}px`,this.combobox.start(),e.addEventListener("combobox-commit",this.oncommit),e.addEventListener("mousedown",this.onmousedown),this.combobox.navigate(1)}deactivate(){let t=this.menu;return!!t&&!!this.combobox&&(this.menu=null,t.removeEventListener("combobox-commit",this.oncommit),t.removeEventListener("mousedown",this.onmousedown),this.combobox.destroy(),this.combobox=null,t.remove(),!0)}onCommit({target:t}){if(!(t instanceof HTMLElement)||!this.combobox)return;let e=this.match;if(!e)return;let n=this.input.value.substring(0,e.position-e.key.length),i=this.input.value.substring(e.position+e.text.length),s={item:t,key:e.key,value:null},r=!this.expander.dispatchEvent(new CustomEvent("text-expander-value",{cancelable:!0,detail:s}));if(r||!s.value)return;let a=`${s.value} `;this.input.value=n+a+i;let o=n.length+a.length;this.deactivate(),this.input.focus({preventScroll:!0}),this.input.selectionStart=o,this.input.selectionEnd=o,this.lookBackIndex=o,this.match=null,this.expander.dispatchEvent(new CustomEvent("text-expander-committed",{cancelable:!1,detail:{input:this.input}}))}onBlur(){if(this.interactingWithList){this.interactingWithList=!1;return}this.deactivate()}onPaste(){this.justPasted=!0}async onInput(){if(this.justPasted){this.justPasted=!1;return}let t=this.findMatch();if(t){this.match=t;let e=await this.notifyProviders(t);if(!this.match)return;e?this.activate(t,e):this.deactivate()}else this.match=null,this.deactivate()}findMatch(){let t=this.input.selectionEnd||0,e=this.input.value;for(let{key:n,multiWord:i}of(t<=this.lookBackIndex&&(this.lookBackIndex=t-1),this.expander.keys)){let s=r(e,n,t,{multiWord:i,lookBackIndex:this.lookBackIndex,lastMatchPosition:this.match?this.match.position:null});if(s)return{text:s.text,key:n,position:s.position}}}async notifyProviders(t){let e=[],n=t=>e.push(t),i=!this.expander.dispatchEvent(new CustomEvent("text-expander-change",{cancelable:!0,detail:{provide:n,text:t.text,key:t.key}}));if(i)return;let s=await Promise.all(e),r=s.filter(t=>t.matched).map(t=>t.fragment);return r[0]}onMousedown(){this.interactingWithList=!0}onKeydown(t){"Escape"===t.key&&(this.match=null,this.deactivate()&&(this.lookBackIndex=this.input.selectionEnd||this.lookBackIndex,t.stopImmediatePropagation(),t.preventDefault()))}};let TextExpanderElement=class TextExpanderElement extends HTMLElement{get keys(){let t=this.getAttribute("keys"),e=t?t.split(" "):[],n=this.getAttribute("multiword"),i=n?n.split(" "):[],s=0===i.length&&this.hasAttribute("multiword");return e.map(t=>({key:t,multiWord:s||i.includes(t)}))}connectedCallback(){let t=this.querySelector('input[type="text"], textarea');if(!(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement))return;let e=new TextExpander(this,t);u.set(this,e)}disconnectedCallback(){let t=u.get(this);t&&(t.destroy(),u.delete(this))}dismiss(){let t=u.get(this);t&&t.dismissMenu()}};window.customElements.get("text-expander")||(window.TextExpanderElement=TextExpanderElement,window.customElements.define("text-expander",TextExpanderElement));var c=null}}]);
//# sourceMappingURL=vendors-node_modules_github_file-attachment-element_dist_index_js-node_modules_github_text-ex-3415a8-a478168c66dc.js.map